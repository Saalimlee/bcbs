<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Firebase File Upload</title>
</head>
<body>
    <h1>Upload a File to Firebase</h1>
    
    <input type="file" id="fileInput" multiple />
    <button onclick="uploadFile()">Upload File</button>
    
    <div id="progress"></div>
    <div id="status"></div>

    <script type="module">
        // Firebase configuration
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-app.js";
        import { getStorage, ref, uploadBytesResumable, getDownloadURL } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-storage.js";
        
        const firebaseConfig = {
            apiKey: "AIzaSyBvBCociR4ASb2E59gl9XmVedip3u4XX0k",
            authDomain: "fileuploader-f8aca.firebaseapp.com",
            projectId: "fileuploader-f8aca",
            storageBucket: "fileuploader-f8aca.appspot.com",
            messagingSenderId: "419779517981",
            appId: "1:419779517981:web:14eb4e07eb2439b40c70f4",
            measurementId: "G-D0GQQ5Z7L5"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const storage = getStorage(app);

        // Upload File function
        function uploadFile() {
            const fileInput = document.getElementById('fileInput');
            const file = fileInput.files[0];
            
            if (file) {
                const storageRef = ref(storage, 'uploads/' + file.name);
                const uploadTask = uploadBytesResumable(storageRef, file);
                
                uploadTask.on('state_changed', 
                    (snapshot) => {
                        // Progress handling
                        const progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;
                        document.getElementById('progress').textContent = 'Upload is ' + progress + '% done';
                    }, 
                    (error) => {
                        // Error handling
                        document.getElementById('status').textContent = 'Error: ' + error.message;
                    }, 
                    () => {
                        // Success handling
                        getDownloadURL(uploadTask.snapshot.ref).then((downloadURL) => {
                            document.getElementById('status').textContent = 'File available at: ' + downloadURL;
                        });
                    }
                );
            } else {
                alert('No file selected!');
            }
        }
    </script>
</body>
</html>
